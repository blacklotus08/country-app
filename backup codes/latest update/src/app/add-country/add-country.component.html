<div class='card'>
  <div class='card-header text-white bg-primary'>
    Add Country
  </div>
  <div class='card-body'>
    <form novalidate (ngSubmit)="save()" [formGroup]="countryForm">
      <div class="form-group col-md-12 pt-1 ng-autocomplete">
        <label for="country_code">Country Code</label>
        <input type="text" list="codes" id="country_code" name="country_code" class="form-control" placeholder="Country Code"
          formControlName="countryCode" [ngClass]="{'is-invalid': (countryForm.get('countryCode').touched ||
                countryForm.get('countryCode').dirty) &&
                !countryForm.get('countryCode').valid }" 
                (change)='selectEvent($event)'
                autocomplete="off"
                 />
                <datalist id="codes">
                  <option *ngFor="let country of filteredcountries" [value]="country.country_code">{{country.country_code}} - {{country.country_name}}</option>
                </datalist>
  
        <span class="invalid-feedback">
          <span *ngIf="countryForm.get('countryCode').errors?.required ">
            Please enter country code.
          </span>
        </span>
        <span class="invalid-feedback">
          <span *ngIf="countryForm.get('countryCode').errors?.record_exist">
            Country Code provided already used.
          </span>
        </span>
        <span class="invalid-feedback">
          <span *ngIf="countryForm.get('countryCode').errors?.country_check">
            Invalid Country Code.
          </span>
        </span>

      </div>
      <div class="form-group col-md-12">
        <label for="country_name">Country Name</label>
        <input type="text" required class="form-control" id="country_name" name="country_name"
          placeholder="Country Name" formControlName="countryName" [ngClass]="{'is-invalid': (countryForm.get('countryName').touched ||
          countryForm.get('countryName').dirty) &&
          !countryForm.get('countryName').valid }" />
        <span class="invalid-feedback">
          <span *ngIf="countryForm.get('countryName').errors?.required">
            Please enter country name.
          </span>
        </span>
        <span class="invalid-feedback">
          <span *ngIf="countryForm.get('countryName').errors?.country_check">
            Invalid Country Name.
          </span>
        </span>
      </div>
      <div class="form-group col-md-12">
        <label for="country_region">Region</label>
        <select name="region" class="form-control" formControlName="countryRegion">
          <option value="Africa">Africa</option>
          <option value="Americas">Americas</option>
          <option value="Asia">Asia</option>
          <option value="Europe">Europe</option>
          <option value="Oceania">Oceania</option>
        </select>
      </div>
      <div class="row justify-content-md-center py-2">
        <div class="col-md-auto">
          <button type="submit" class="btn btn-primary mr-1"
            [title]="countryForm.valid ? 'Save your entered data' : 'Disabled until the form data is valid'"
            [disabled]="!countryForm.valid">
            Save
          </button>
          <button type="button" class="btn btn-secondary mr-1" (click)="goBack();">Cancel</button>
          <!-- <button type="button" class="btn btn-primary mr-1" (click)="populateTestData()">
            Test Data
          </button> -->
        </div>
      </div>
    </form>
  </div>
</div>
<!-- <br>Dirty: {{ countryForm.dirty }}
<br>Touched: {{ countryForm.touched }}
<br>Valid: {{ countryForm.get('countryCode').valid }}
<br>Value: {{ countryForm.value | json }} -->